import{r as a,j as e}from"./index-BSU3LMm8.js";import{a as M}from"./axios-upsvKRUO.js";const P="/assets/success-BKNK3EhH.gif",H=()=>{const[r,p]=a.useState(null),[l,g]=a.useState(""),[n,f]=a.useState(""),[o,b]=a.useState(""),[i,c]=a.useState(""),[d,u]=a.useState(!1),[N,m]=a.useState(!1),[j,x]=a.useState(0),w="http://localhost:5000",S=s=>{const t=s.target.files[0];t&&p(t)},C=s=>g(s.target.value),k=s=>f(s.target.value),L=s=>b(s.target.value),U=async s=>{if(s.preventDefault(),!r||!l||!n||!o){c("Please fill out all fields");return}const t=new FormData;t.append("image",r),t.append("name",l),t.append("description",n),t.append("category",o),t.append("dateTime",new Date().toLocaleString()),u(!0),c(""),m(!1),x(0);try{const h=new AbortController,D=await M.post(`${w}/api/sarees/upload`,t,{headers:{"Content-Type":"multipart/form-data"},signal:h.signal,onUploadProgress:v=>{const y=Math.round(v.loaded*100/v.total);x(y),y===100&&(m(!0),u(!1),p(null),g(""),f(""),b(""),setTimeout(()=>m(!1),2500))}})}catch(h){u(!1),x(0),console.error("Error uploading the file:",h),c("Error uploading the file. Please try again.")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4 md:p-6 lg:p-8",children:[N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-2xl transform scale-100 animate-bounce",children:[e.jsx("img",{src:P,alt:"Success",className:"w-40 h-40 object-cover rounded-lg"}),e.jsx("p",{className:"text-center text-lg font-medium text-gray-800 mt-4",children:"Upload Successful!"})]})}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6",children:e.jsx("h1",{className:"text-3xl font-bold text-white text-center",children:"Upload Saree"})}),e.jsxs("form",{onSubmit:U,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Name of Saree"}),e.jsx("input",{type:"text",value:l,onChange:C,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Enter saree name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:n,onChange:k,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 min-h-[100px]",placeholder:"Enter saree description",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Choose Category"}),e.jsxs("select",{value:o,onChange:L,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Synthetic",children:"Synthetic"}),e.jsx("option",{value:"Cotton",children:"Cotton"}),e.jsx("option",{value:"Shalu",children:"Shalu"}),e.jsx("option",{value:"Zari",children:"Zari"}),e.jsx("option",{value:"Fancy",children:"Fancy"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Choose Image"}),e.jsxs("div",{className:"mt-1 flex flex-col justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg hover:border-blue-500 transition-all duration-200",children:[e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("div",{className:"flex text-sm text-gray-600",children:e.jsxs("label",{className:"relative cursor-pointer text-center mx-auto bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[e.jsx("span",{className:"text-center",children:"Upload Your Saree Image"}),e.jsx("input",{type:"file",onChange:S,className:"sr-only",accept:"image/*",required:!0})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"})]}),r&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 inline-flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Selected: ",r.name]})]})})]})]}),i&&e.jsx("div",{className:`text-center p-3 rounded-lg ${i.includes("successful")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i}),e.jsxs("button",{type:"submit",disabled:d,className:"w-full relative bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg font-medium text-lg hover:opacity-90 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden",children:[d?e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsxs("span",{children:["Uploading... ",j,"%"]})]})}):"Upload Saree",d&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-white bg-opacity-50",style:{width:`${j}%`,transition:"width 1s ease-in-out"}})]})]})]})})]})};export{H as default};
